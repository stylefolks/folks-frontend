# Folks-Frontend

## 사용 기술

| 기술             | 선택 이유                    |
| ---------------- | ---------------------------- |
| **React + Vite** | 빠른 개발 환경과 모던 번들링 |
| **Express**      | 간단한 SSR 환경 구현         |
| **Tailwind CSS** | 빠른 스타일링                |

## 진행 상황

### 회원가입/로그인

이메일 인증 기반 회원가입을 진행하며 SSO와 같은 기능은 추후 확장 논의 필요

- [x] 로그인 페이지
- [x] 회원가입 페이지
- [ ] 이메일 인증
- [ ] 비밀번호 찾기
- [ ] 로그인, 로그아웃 고도화

### 🧑‍💼 유저 프로필

- [x] 기본 프로필 수정 기능
- [x] 개인정보(닉네임, 개인 링크, 비밀번호, 프로필사진, 프로필 배경사진) 변경
- [x] 개인 페이지 카테고리(OOTD, Column, Review)별 포스트
- [x] Follow한 크루 리스트
- [x] 개인 작성한 게시글 전체보기

### 📝 게시글

- [x] ProseMirror 기반 글 작성 페이지
- [x] 임시 게시글 저장 기능
- [x] 게시글 상세 페이지 및 댓글 작성
- [x] 카테고리에 따른 게시글 CRUD
  - BrandMetaType(Notice, Promotion...), CrewMetaType(Notice, Event...)
- [x] 댓글 CRUD UI/UX 및 API 연결
- PostType은 두가지로 축약
  - TALK: 일상적인 소통, 질문, 후기, 정보 공유 등 자유로운 커뮤니티형 게시물
  - COLUMN: 인사이트, 칼럼, 리뷰, 분석 등 크리에이터/브랜드/마스터가 제공하는 고품질 콘텐츠
  - CREW, BRAND, NOTICE, 기타 특수 포스트들은 별도의 메타데이터(예: postType이 아니라 postCategory, tag, 혹은 CREW 연동 등)로 처리해서 메인 포스트 타입은 2개로 간소화하는 것이 유지보수 측면에서 뛰어나다고 판단.
  - 참고: 이후에 CREW 내 공지/브랜드 소식 등은 postType이 아니라, 별도 플래그/카테고리/연관 테이블로 분리해서 구현

### 🎪 CREW

- [x] 크루 생성/수정/삭제
- [x] 토큰 기반 권한 확인 후 페이지 수정/삭제 UI 노출
- 크루 생성자 혹은 Master 등급 이상의 계정으로 로그인 시 크루 상세 페이지에서
  커버 이미지, 소개글 등을 직접 수정하고 삭제할 수 있습니다.
- [x] 크루 전용 포스트 및 후기 등록
  - @crewname으로 멘션된 글의 hashtag를 통해 해당 글을 필터링함.
  - @crewname + crewMetaType으로 관리하도록 함.
  - CrewTabType은 ('OVERVIEW','POSTS','NOTICE','EVENT','TOPIC')가 존재하며 크루별로 타입에 따라 다른 네이밍을 쓸 수 있음.
    - Topic: 특정 해시태그들을 기반으로 모음집을 만들 수 있는 타입\
    - Overview: 크루에 대한 소개글 작성
    - POSTS: 크루가 멘션된 전체 글
    - NOTICE: 공지사항들
    - EVENT: 오프라인 이벤트 공지
      - 추후 v2에서 지도또는 길찾기 관련 UI/UX추가 하면 좋을 것으로 사료됨
- [x] 크루 외부 링크 관리
  - 일단 모달 내 텍스트와 링크만 기재 가능하도록
- [x] CREW 이벤트 탭 등록(날짜, 장소, 링크)
- [x] 이벤트 리스트 뷰
- [x] 팔로우한 회원 리스트 관리
- [ ] 팔로우한 유저 크루 내 등급 변경
- [ ] 팔로우한 유저의 등급에 따른 포스팅(OOTD 한정) 노출
- [ ] CREW 활동 히스토리 → 유저 프로필 연결

### COLUMN

- [ ] COLUMN

1. COLUMN 작성 권한 조건 (CREW)

> COLUMN은 전체 열람 가능하나, 작성은 아래 1,2 조건을 만족한 유저만 가능

| 조건              | 설명                                    |
| ----------------- | --------------------------------------- |
| 1. 전역 등급      | `influencer` 이상일 것                  |
| 2. CREW 내부 역할 | 해당 CREW의 `owner` 또는 `manager`일 것 |

2. COLUMN 작성 권한 조건 (BRAND)

> COLUMN은 전체 열람 가능하나, 작성은 아래 1 조건을 만족한 유저만 가능

| 조건              | 설명                                    |
| ----------------- | --------------------------------------- |
| 1. 전역 등급      | `BRAND` 이상일 것                       |
| 2. CREW 내부 역할 | 해당 CREW의 `owner` 또는 `manager`일 것 |

### 🏷️ BRAND

- [x] 브랜드 개별 페이지
- [ ] 브랜드 정보 수정
- [ ] BRAND 글 상단 고정
- [ ] CREW 페이지 스폰서 영역
- [ ] 크루와 연결 시스템
- [x] 각 페이지들의 게시글은 무한스크롤로 페이지네이션

### 권한

1. 플랫폼 전역 유저 등급 (User Tier)

| 등급       | 키값         | 설명                                 |
| ---------- | ------------ | ------------------------------------ |
| 일반 유저  | `user`       | 가입만 한 상태. CREW 생성 불가       |
| 인플루언서 | `influencer` | CREW 생성 가능, 활동 중심 유저       |
| 운영진     | `master`     | Folks 플랫폼 관리자 계정 (슈퍼 권한) |

2. CREW 내부 역할 (Crew Role)

| 역할        | 키값      | 설명                               |
| ----------- | --------- | ---------------------------------- |
| CREW 생성자 | `owner`   | CREW를 최초 생성한 유저 (1명 한정) |
| CREW 관리자 | `manager` | Owner가 지정한 관리자. 다수 가능   |
| 일반 멤버   | `member`  | CREW에 속한 유저 (팔로워/가입자)   |

- CREW 내부 권한은 CREW마다 별도로 관리됨
- CREW 생성자는 자동으로 `owner` 역할 부여
- `manager`는 CREW 내 설정 탭 등에서 지정 가능

### Testing & Feedback

- [x] auth/profile 유닛 테스트
- [ ] Playwright 기반 E2E 테스트 (빌드 후 `npm run test:e2e`)
- [ ] 디자인 개선 및 UX 피드백 대응

### Mock API

개발 편의를 위해 [MSW](https://mswjs.io/) 기반의 목 API가 준비되어 있습니다.
현재는 별도의 환경 변수 설정 없이도 모든 환경에서 MSW가 기본적으로 활성화되며,
빌드 후 CSR 환경에서도 목 API가 동작합니다.

로그인은 아래 계정으로 가능합니다.

- 이메일: `folks@gmail.com`
- 사용자명: `folks`
- 비밀번호: `folks-password`

`@`검색은 아래로 가능합니다.

- write페이지에서 `Crew-[id]`로 prefix를 가진 이름이 랜덤으로 생성됩니다.
- 크루 상세 데이터를 호출하면 해당 크루를 팔로우한 회원 리스트가 함께 반환됩니다.

`/profile/[userId]` 경로로 접근하면 임의의 랜덤 프로필 정보를 확인할 수 있습니다.

본 프로젝트는 [stylefolks-frontend](https://github.com/stylefolks/stylefolks-frontend) 의 명세를 참고하여 개발되고 있습니다.

## Fly.io 배포

Fly.io에서 SSR과 MSW를 사용한 MVP를 배포하려면 Fly CLI와 Docker가 필요합니다.

1. 앱 초기화

   ```bash
   flyctl launch
   ```

   저장소에 포함된 `fly.toml`을 사용해 바로 배포할 수 있습니다.

2. 배포
   ```bash
   flyctl deploy
   ```
   배포 후 출력되는 `https://<app>.fly.dev` 주소로 접속하면 프로덕션 모드에서도 MSW가 실행된 화면을 확인할 수 있습니다.

## MVP 기능 최종

| #   | 항목                                                    | 상태                                                                                                                                       |
| --- | ------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------ |
| 1   | 유저 간 팔로우/팔로워 기능                              | ✅ 있음 (`Follow` 테이블)                                                                                                                  |
| 2   | 유저 → 크루 팔로우                                      | ✅ 있음 (`CrewMember`)                                                                                                                     |
| 3   | 크루는 Influencer만 생성 가능                           | ✅ 명시됨                                                                                                                                  |
| 4   | Influencer당 1개 크루 제한                              | ✅ 중요 제한사항                                                                                                                           |
| 5   | 크루 내 등급: Owner/Manager/User                        | ✅ (`CrewMember.role`)                                                                                                                     |
| 6   | 브랜드도 동일 등급 구조를 따르되 전역 `BRAND` 권한 가짐 | ✅                                                                                                                                         |
| 7   | 브랜드 → 크루 후원 가능                                 | ✅ (`Sponsorship`)                                                                                                                         |
| 8   | 유저 → 크루 후원 가능                                   | ✅ (같은 구조 재사용 가능)                                                                                                                 |
| 9   | Stripe로 후원 시스템 예정                               | ✅ 설계 및 Test Mode 포함                                                                                                                  |
| 10  | Column 작성 조건: Owner 또는 Manager만 가능             | ✅                                                                                                                                         |
| 11  | 브랜드 광고: Crew 또는 Folks 대상                       | ✅ (`AdCampaign`)                                                                                                                          |
| 12  | 크루 탭 관리 가능: `CrewTabType`으로 관리               | ✅ 탭 커스터마이징 구조 명확                                                                                                               |
| 13  | Topic: 특정 해시태그를 탭화                             | ✅ CREW 커뮤니티 큐레이션 기능                                                                                                             |
| 14  | 탭에서 Post/Topic은 해당 CREW를 @멘션해야 나타남        | ✅ 멘션 기반 필터링 로직                                                                                                                   |
| 15  | PostType = TALK, COLUMN → Brand 또는 Crew만 작성 가능   | ✅                                                                                                                                         |
| 16  | 회원가입 = 간단 이메일 인증 기반                        | ✅ MVP에 적합한 방식                                                                                                                       |
| 17  | Post 작성자 검증                                        | COLUMN이 "Crew만 작성 가능"하다고 했지만 어떤 CREW의 COLUMN인지 식별 필요 → post.crewId 반드시 필요                                        |
| 18  | CREW 탈퇴 처리 플로우                                   | Owner가 탈퇴하거나 강제 탈퇴 시 Manager 승계로 갈음                                                                                        |
| 19  | 브랜드 후원/광고 승인 구조                              | 광고/후원은 플랫폼 즉시 집행으로 설정                                                                                                      |
| 20  | 탭/토픽 관리 UI/UX                                      | CREW가 탭을 어떻게 추가/정렬/숨김 처리는 권한에 따라 크루 탭에 설정 버튼이 생기며 해당 설정버튼 클릭시 별도의 모달 또는 페이지를 통해 진행 |
| 21  | 브랜드 계정 생성 방법                                   | 일반 유저가 가입 후 브랜드 심사를 플랫폼에 요청 시 계정 변환 진행                                                                          |
| 22  | 회원 상태 관리                                          | 정지 계정, 탈퇴 유저, 휴면 계정 등 사용자 상태는 별도의 컬럼을 추가 🧠 `UserStatus` Enum : `ACTIVE`, `BANNED`, `DELETED`, `INACTIVE`       |
| 23  | 크루 콘텐츠 외부 노출 범위                              | COLUMN이나 TOPIC 등은 전체 공개                                                                                                            |
| 24  | 크루 상태 관리                                          | 🧠 `CrewStatus` Enum : 운영중, 비공개, 정지                                                                                                |
| 25  | 게시글 상태 관리                                        | 🧠 `PostVisibility`: PUBLIC / CREW_ONLY / FOLLOWER_ONLY 등 나중에 확장 고려                                                                |
| 26  | 크루 탭 관리 configuration                              | 🧠 `CrewTabConfig` Table : 탭 순서, 토픽 연결 해시태그, 표시 여부 등 설정 저장용                                                           |

## MVP 이후 추가할 내용

| #   | 항목                            | 설명                                                                                                                           |
| --- | ------------------------------- | ------------------------------------------------------------------------------------------------------------------------------ |
| 27  | **PostReaction (좋아요 등)**    | 게시글 단위의 좋아요/싫어요/🔥 등 반응 저장 테이블<br>`PostReaction { id, postId, userId, type (LIKE, CLAP, etc), createdAt }` |
| 28  | **PostViewLog (조회수 기록)**   | 조회수를 누적하는 것이 아니라 유저별 조회 로그를 기록 (bot 방지 및 사용자 분석용)                                              |
| 29  | **AnalyticsLog (행동 로그)**    | 검색어, 버튼 클릭, 탭 이동 등 UX 개선을 위한 행동 로그 테이블 (MVP에선 console 기반만 두어도 좋음)                             |
| 30  | **CrewJoinRequest (가입 신청)** | Crew가 `승인제`로 운영되도록 확장하고 싶을 경우 필요<br>`CrewJoinRequest { id, userId, crewId, status, requestedAt }`          |
| 31  | **NotificationTemplate**        | 알림 템플릿을 설정해두고 동적으로 처리하도록 (ex. “OO님이 게시글을 작성했습니다”)                                              |
| 32  | **ContentReport (신고 기능)**   | 유저가 부적절한 댓글/게시글을 신고할 수 있도록 하는 테이블                                                                     |
| 33  | **UserDevice (디바이스 기록)**  | 유저의 알림 발송이나 보안 강화(2FA 등)를 위한 기초 데이터 수집                                                                 |
| 34  | **BannerCampaign**              | Folks 플랫폼 메인에 띄울 배너를 관리하는 시스템 (운영 툴 고려 시 유용)                                                         |
| 35  | **ReferralCode / InviteLink**   | 초대 기반 가입 시에 필요 (커뮤니티 성장 모델 시 유용)                                                                          |
| 36  | **TagCategory (태그 분류화)**   | 태그가 너무 많아졌을 때 필터링 및 랭킹에 유리한 구조                                                                           |
| 37  | **CrewSlug, PostSlug (SEO용)**  | 추후 SEO 및 공유 시 유저친화 URL로 확장할 수 있도록 slug 필드 정의                                                             |

- [ERD LINK](https://dbdiagram.io/d/6861ec8cf413ba35086e3ead)
  ![erd](./erd.png)
